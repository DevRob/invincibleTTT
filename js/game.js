function switchPlayer(t){return parseInt((t+1)%2)}var Player=function(t){function e(t){return t?t:Math.randomChoice(["bob","tom","selly","katy","zorg"])}this.playerName=e(t[1]),this.playerType=t[0]},Game=function(t){this.boardSize=t.boardSize,this.board=new Board(this.boardSize),this.squareSize=canvas.width/this.boardSize,this.players=[new Player(t.player1),new Player(t.player2)],this.winner=null,this.frameSetup(),this.firstMove=t.firstMove,this.actualPlayer=this.setFirstPlayer(this.firstMove)};Game.prototype.setFirstPlayer=function(){return this.firstMove>1?Math.randomChoice([0,1]):parseInt(this.firstMove)},Game.prototype.frameSetup=function(){for(var t=1,e=this.boardSize;e>t;t++){lineStart=[this.squareSize*t,0],lineEnd=[this.squareSize*t,canvas.height];for(var r=0;2>r;r++)ctx.beginPath(),ctx.moveTo(lineStart[0],lineStart[1]),ctx.lineTo(lineEnd[0],lineEnd[1]),ctx.lineWidth=5,ctx.strokeStyle="#8894a0",ctx.stroke(),lineStart.reverse(),lineEnd.reverse()}},Game.prototype.drawMove=function(){for(var t=this.board.squares,e=this.squareSize,r=0,i=t.length;i>r;r++)for(var o=0,a=t[r].length;a>o;o++)0===t[r][o]?(ctx.beginPath(),ctx.arc(this.getCoord(o),this.getCoord(r),canvas.width/(2*this.boardSize)*.5,0,2*Math.PI),ctx.strokeStyle="#626e7a",ctx.lineWidth=this.squareSize/10,ctx.stroke()):1===t[r][o]&&(ctx.beginPath(),ctx.moveTo(this.getCoord(o)+e/4,this.getCoord(r)+e/4),ctx.lineTo(this.getCoord(o)-e/4,this.getCoord(r)-e/4),ctx.moveTo(this.getCoord(o)+e/4,this.getCoord(r)-e/4),ctx.lineTo(this.getCoord(o)-e/4,this.getCoord(r)+e/4),ctx.strokeStyle="#27a8e0",ctx.lineCap="round",ctx.lineWidth=this.squareSize/10,ctx.stroke())},Game.prototype.drawWin=function(){function t(t){var r={0:[[t,0],[t,e-1]],1:[[0,t.mod(e)],[e-1,t.mod(e)]],2:[[(t-2*e)*(e-1),0],[(t-2*e+1).mod(2)*(e-1),e-1]]};return r[parseInt(t/e)]}var e=(this.board.squares,this.squareSize,this.board.lines,parseInt(this.board.dim)),r=parseInt(this.board.winnerLine),i=t(r);this.actualPlayer;ctx.beginPath(),ctx.moveTo(this.getCoord(i[0][1]),this.getCoord(i[0][0])+12),ctx.lineTo(this.getCoord(i[1][1]),this.getCoord(i[1][0])-12),ctx.strokeStyle="#8894a0",ctx.lineCap="round",ctx.lineWidth=this.squareSize/7,ctx.stroke()},Game.prototype.getCoord=function(t){return this.squareSize*(t+.5)},Game.prototype.getSquare=function(t,e){return{row:parseInt(e/this.squareSize),col:parseInt(t/this.squareSize)}},Game.prototype.resetGame=function(){this.board.init(),ctx.clearRect(0,0,canvas.width,canvas.height),this.setFirstPlayer(),this.frameSetup(),this.winner=null};