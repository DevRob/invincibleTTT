function newGame(){location.reload()}function startGame(){function e(o){var i=n.board.checkWin();refreshCounter(r,i),n.drawMove(),null!=i?(n.drawMove(),3!=i&&n.drawWin(),setTimeout(function(){n.resetGame(),e()},1250)):"A.I."==n.players[n.actualPlayer].playerType?setTimeout(function(){t()},750):"Human"==n.players[n.actualPlayer].playerType&&canvas.addEventListener("mousedown",a)}function a(t){var r=(n.squareSize,n.getSquare(t.offsetX,t.offsetY));null===n.board.squares[r.row][r.col]&&(n.board.move([r.row,r.col],n.actualPlayer),n.actualPlayer=switchPlayer(n.actualPlayer),canvas.removeEventListener("mousedown",a),e())}function t(){var a={};a=n.board.getEmptySquares().length>=Math.pow(n.board.dim,2)?{score:10,move:Math.randomChoice(n.board.getEmptySquares())}:minMaxMove(n.board,n.actualPlayer,0,-(1/0),1/0),n.board.move(a.move,n.actualPlayer),n.actualPlayer=switchPlayer(n.actualPlayer),e()}var n,r=[0,0,0],o=loadSettings();o&&(n=new Game(o),menu.style.display="none",ingameUI.style.display="block",$(".player1").text(n.players[0].playerName),$(".player2").text(n.players[1].playerName),e())}function loadSettings(){var e={boardSize:3,player1Type:$("#radio1").children(".checked").attr("data-ptype1"),player2Type:$("#radio2").children(".checked").attr("data-ptype2"),firstMove:$("#radio3").children(".checked").attr("data-firstmove")},a={boardSize:e.boardSize,player1:[e.player1Type,$("#input-4").val()],player2:[e.player2Type,$("#input-5").val()],firstMove:e.firstMove};for(option in e)if(!e[option])return void alert("Please set: "+option);return a}function refreshCounter(e,a){e[a-1]+=1,$("#0").children("span").text(e[0]),$("#1").children("span").text(e[1]),$("#2").children("span").text(e[2])}var canvas=document.getElementById("canvas"),menu=document.getElementById("menu"),ingameUI=document.getElementById("ingameUI"),ctx=canvas.getContext("2d"),canvasSize=.6*window.innerHeight;ctx.mozImageSmoothingEnabled=!0,ctx.msImageSmoothingEnabled=!0,ctx.imageSmoothingEnabled=!0,canvas.width=canvas.height=canvasSize,$(function(){$(".fake-button").on("click",function(){$(this).parent(".button-bar").find("img").addClass("gray-filter"),$(this).siblings(".fake-button").removeClass("checked"),$(this).children("img").removeClass("gray-filter"),$(this).addClass("checked")}),$("#startGame").on("click",startGame),$("#newgame").on("click",newGame)});